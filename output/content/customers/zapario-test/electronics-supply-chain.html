<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronics Supply Chain & Component Sourcing | Zapario</title>
    <meta name="description" content="Secure your electronics production. Zapario offers strategic component sourcing, BOM risk analysis, counterfeit mitigation, and obsolescence management.">
    <meta name="keywords" content="Electronics Supply Chain, Component Sourcing, BOM Management, Obsolescence Management, EOL Components, Counterfeit Mitigation, VMI, EMS">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        zapario: {
                            red: '#D71920',
                            dark: '#991116',
                            light: '#fef2f2',
                            gray: '#f3f4f6'
                        }
                    },
                    backgroundImage: {
                        'dot-pattern': "radial-gradient(#e5e7eb 1px, transparent 1px)"
                    }
                }
            }
        }
    </script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- 
    Placeholder Comments Required by Prompt:
    
    <!-- Chosen Palette: "Zapario Corporate Trust" - Clean white backgrounds, slate grays for structure, and Zapario Red (#D71920) for alerts, data visualization, and primary actions. Emphasizes security and reliability. -->
    
    <!-- Application Structure Plan:
         1. Hero Section: "Resilient Electronics Supply Chain". Animated CSS network nodes representing global sourcing.
         2. BOM Risk Analyzer (Interactive): Users manipulate sliders (Lead Time, EOL %, Sole Source %) to see how their risk profile shifts, outputting a dynamic Risk Score via a Chart.js Gauge.
         3. Component Lifecycle Matrix: Clickable tabs (Active -> NRND -> Obsolete) explaining intervention strategies.
         4. Capabilities Grid: Counterfeit testing, VMI, Sourcing.
    -->
    
    <!-- Visualization & Content Choices:
         1. Risk Gauge (Chart.js Doughnut):
            - Goal: Visualize vulnerability.
            - Viz: Half-doughnut acting as a gauge (Green -> Yellow -> Red).
            - Interaction: Sliders update the needle/score dynamically.
         2. Global Network (CSS Animation):
            - Goal: Show connectivity and reach without heavy SVGs.
            - Viz: Pulsing dots connected by thin divs.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used (relying on Phosphor Icons and CSS Canvas). NO Mermaid JS used. -->
    -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #1f2937;
        }
        
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 250px;
        }

        .shadow-soft {
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.08);
        }

        /* Custom Range Slider */
        input[type=range] {
            accent-color: #D71920;
        }

        /* Lifecycle Tab Styling */
        .lifecycle-tab {
            transition: all 0.3s ease;
            position: relative;
        }
        .lifecycle-tab.active {
            background-color: #D71920;
            color: white;
            border-color: #D71920;
            box-shadow: 0 4px 14px rgba(215, 25, 32, 0.3);
        }
        .lifecycle-tab:not(.active):hover {
            background-color: #fef2f2;
            border-color: #fca5a5;
        }
        
        /* Node Network Animation */
        .node {
            position: absolute;
            background-color: #D71920;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(215, 25, 32, 0.5);
            animation: pulse-node 3s infinite alternate;
        }
        @keyframes pulse-node {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(215, 25, 32, 0.5); }
            100% { transform: scale(1.3); box-shadow: 0 0 20px rgba(215, 25, 32, 0.8); }
        }
        .connection-line {
            position: absolute;
            background-color: #e5e7eb;
            transform-origin: left center;
            z-index: 0;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col overflow-x-hidden">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center">
                    <img src="https://storage.googleapis.com/z-wp-content/zapario-1.png" alt="Zapario Logo" class="h-10 w-auto">
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('analyzer')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">Risk Analyzer</button>
                    <button onclick="scrollToSection('lifecycle')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">Lifecycle Mgmt</button>
                    <button onclick="scrollToSection('capabilities')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">Core Capabilities</button>
                </div>
                <button class="bg-zapario-red hover:bg-zapario-dark text-white px-5 py-2.5 rounded-md text-sm font-bold transition-all shadow-md">
                    Secure Your Supply
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative pt-32 pb-20 px-4 sm:px-6 lg:px-8 overflow-hidden bg-white">
        <div class="absolute inset-0 bg-dot-pattern bg-[size:24px_24px] opacity-40"></div>
        
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center relative z-10">
            <div>
                <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-mono font-medium bg-red-50 text-zapario-red border border-red-100 mb-6">
                    <i class="ph-bold ph-globe-hemisphere-west mr-2"></i>
                    Global Component Sourcing
                </div>
                <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight">
                    Resilient Electronics <br>
                    <span class="text-zapario-red">Supply Chain</span>
                </h1>
                <p class="text-xl text-gray-500 mb-8 font-light leading-relaxed">
                    Protect your production from component shortages and obsolescence. We combine engineering intelligence with global sourcing networks to de-risk your Bill of Materials (BOM).
                </p>
                <div class="flex flex-wrap gap-4">
                    <button onclick="scrollToSection('analyzer')" class="bg-gray-900 text-white px-6 py-3 rounded-md font-bold shadow-lg hover:bg-gray-800 transition-all flex items-center gap-2">
                        Analyze BOM Risk <i class="ph-bold ph-chart-line-up"></i>
                    </button>
                </div>
                
                <div class="mt-10 flex gap-8 border-t border-gray-100 pt-6">
                    <div>
                        <div class="flex items-center gap-2 text-zapario-red font-bold mb-1">
                            <i class="ph-fill ph-check-circle"></i> Counterfeit
                        </div>
                        <div class="text-xs text-gray-500 uppercase">Detection & Avoidance</div>
                    </div>
                    <div>
                        <div class="flex items-center gap-2 text-zapario-red font-bold mb-1">
                            <i class="ph-fill ph-check-circle"></i> Obsolescence
                        </div>
                        <div class="text-xs text-gray-500 uppercase">Proactive Management</div>
                    </div>
                </div>
            </div>
            
            <!-- Hero Visual: Abstract CSS Network -->
            <div class="relative h-[400px] bg-gray-50 rounded-2xl border border-gray-200 shadow-inner overflow-hidden flex items-center justify-center p-8">
                <div class="absolute inset-0 opacity-50 bg-[radial-gradient(circle_at_center,white_0%,transparent_100%)]"></div>
                
                <!-- CSS Nodes and Lines -->
                <div class="relative w-full h-full z-10">
                    <!-- Central Node -->
                    <div class="node w-6 h-6 left-1/2 top-1/2 -mt-3 -ml-3 z-20" style="animation-delay: 0s;"></div>
                    
                    <!-- Peripheral Nodes -->
                    <div class="node w-4 h-4 left-1/4 top-1/4 z-20" style="animation-delay: 0.2s;"></div>
                    <div class="node w-3 h-3 right-1/4 top-1/3 z-20" style="animation-delay: 0.5s;"></div>
                    <div class="node w-5 h-5 left-1/3 bottom-1/4 z-20" style="animation-delay: 0.8s;"></div>
                    <div class="node w-4 h-4 right-1/3 bottom-1/3 z-20" style="animation-delay: 0.3s;"></div>
                    
                    <!-- Connections (Calculated manually for visual effect) -->
                    <!-- Center to Top Left -->
                    <div class="connection-line h-0.5 w-32 top-[38%] left-[32%] rotate-[35deg]"></div>
                    <!-- Center to Top Right -->
                    <div class="connection-line h-0.5 w-32 top-[42%] left-[50%] rotate-[-30deg]"></div>
                    <!-- Center to Bottom Left -->
                    <div class="connection-line h-0.5 w-24 top-[50%] left-[40%] rotate-[120deg]"></div>
                    <!-- Center to Bottom Right -->
                    <div class="connection-line h-0.5 w-32 top-[50%] left-[50%] rotate-[45deg]"></div>
                </div>

                <div class="absolute bottom-6 right-6 bg-white border border-gray-200 px-4 py-2 rounded-lg shadow-soft text-xs font-mono text-gray-600 flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-zapario-red animate-pulse"></span>
                    Sourcing Network Active
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive BOM Risk Analyzer -->
    <section id="analyzer" class="py-24 bg-gray-50 border-y border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-zapario-red font-bold uppercase tracking-widest text-sm">Supply Chain Intelligence</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">BOM Health & Risk Analyzer</h2>
                <div class="h-1 w-20 bg-zapario-red mx-auto my-4"></div>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    A vulnerable Bill of Materials can halt production. Adjust the parameters below to simulate how common supply chain factors impact your overall production risk.
                </p>
            </div>

            <div class="grid lg:grid-cols-12 gap-12 bg-white rounded-2xl border border-gray-200 shadow-soft overflow-hidden">
                
                <!-- Inputs -->
                <div class="lg:col-span-5 p-8 border-r border-gray-100 bg-gray-50/50">
                    <h3 class="font-bold text-gray-900 mb-6 text-lg">Adjust BOM Parameters</h3>
                    
                    <div class="space-y-8">
                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-bold text-gray-700">Sole Sourced Components</label>
                                <span id="sole-val" class="text-zapario-red font-mono font-bold">20%</span>
                            </div>
                            <input type="range" id="soleInput" min="0" max="100" value="20" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <p class="text-xs text-gray-500 mt-1">Parts with only one approved manufacturer.</p>
                        </div>

                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-bold text-gray-700">Average Lead Time (Weeks)</label>
                                <span id="lead-val" class="text-zapario-red font-mono font-bold">12 Wks</span>
                            </div>
                            <input type="range" id="leadInput" min="2" max="52" value="12" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <p class="text-xs text-gray-500 mt-1">Time from PO placement to delivery.</p>
                        </div>

                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-bold text-gray-700">Components near EOL/NRND</label>
                                <span id="eol-val" class="text-zapario-red font-mono font-bold">5%</span>
                            </div>
                            <input type="range" id="eolInput" min="0" max="40" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <p class="text-xs text-gray-500 mt-1">Parts nearing End of Life or Not Recommended for New Design.</p>
                        </div>
                    </div>
                </div>

                <!-- Outputs / Gauge -->
                <div class="lg:col-span-7 p-8 flex flex-col justify-center items-center relative">
                    <h3 class="font-bold text-gray-400 uppercase tracking-widest text-sm mb-2 text-center">Supply Chain Risk Score</h3>
                    
                    <div class="w-full max-w-sm relative">
                        <div class="chart-container">
                            <canvas id="riskGauge"></canvas>
                        </div>
                        <!-- Score Text Overlay -->
                        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 text-center">
                            <div id="risk-score-display" class="text-5xl font-bold font-mono text-gray-900">45</div>
                            <div class="text-sm font-bold text-gray-500 uppercase">Out of 100</div>
                        </div>
                    </div>

                    <div class="mt-8 w-full max-w-md bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                        <div class="flex items-center gap-2 mb-2">
                            <i id="action-icon" class="ph-fill ph-warning-circle text-yellow-500 text-xl"></i>
                            <h4 class="font-bold text-gray-900">Zapario Recommendation</h4>
                        </div>
                        <p id="action-text" class="text-sm text-gray-600 leading-relaxed">
                            Moderate risk detected. Initiate a BOM scrub to identify pin-to-pin drop-in replacements for sole-sourced components and begin forecasting for the next 12 months.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Lifecycle Management Matrix -->
    <section id="lifecycle" class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-gray-900">Component Lifecycle Interventions</h2>
                <div class="h-1 w-20 bg-zapario-red mx-auto my-4"></div>
                <p class="text-gray-600">Electronics age rapidly. We implement specific sourcing and engineering strategies at every phase of a component's lifecycle.</p>
            </div>

            <div class="max-w-5xl mx-auto">
                <!-- Stepper/Tabs -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <button onclick="setLifecyclePhase('active')" id="tab-active" class="lifecycle-tab active px-4 py-4 rounded-xl border border-gray-200 font-bold text-sm text-center flex flex-col items-center gap-2">
                        <i class="ph-fill ph-check-circle text-2xl"></i> Active
                    </button>
                    <button onclick="setLifecyclePhase('nrnd')" id="tab-nrnd" class="lifecycle-tab px-4 py-4 rounded-xl border border-gray-200 font-bold text-sm text-center text-gray-600 flex flex-col items-center gap-2">
                        <i class="ph-fill ph-warning text-2xl"></i> NRND
                    </button>
                    <button onclick="setLifecyclePhase('eol')" id="tab-eol" class="lifecycle-tab px-4 py-4 rounded-xl border border-gray-200 font-bold text-sm text-center text-gray-600 flex flex-col items-center gap-2">
                        <i class="ph-fill ph-clock-countdown text-2xl"></i> EOL
                    </button>
                    <button onclick="setLifecyclePhase('obsolete')" id="tab-obsolete" class="lifecycle-tab px-4 py-4 rounded-xl border border-gray-200 font-bold text-sm text-center text-gray-600 flex flex-col items-center gap-2">
                        <i class="ph-fill ph-x-circle text-2xl"></i> Obsolete
                    </button>
                </div>

                <!-- Content Area -->
                <div class="bg-gray-50 rounded-2xl border border-gray-200 p-8 shadow-inner min-h-[250px] flex items-center transition-all duration-300" id="lifecycle-content">
                    <!-- Default Content (Active) -->
                    <div class="grid md:grid-cols-3 gap-8 w-full">
                        <div class="md:col-span-1">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">Active Phase</h3>
                            <span class="inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded uppercase">Standard Production</span>
                        </div>
                        <div class="md:col-span-2 space-y-4">
                            <p class="text-gray-600">The component is in full production with no immediate plans for discontinuation. However, market fluctuations can still cause shortages.</p>
                            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                <h4 class="font-bold text-zapario-red mb-1 text-sm uppercase">Zapario Strategy</h4>
                                <ul class="text-sm text-gray-700 space-y-2">
                                    <li class="flex items-start gap-2"><i class="ph-bold ph-caret-right text-zapario-red mt-0.5"></i> Negotiate long-term scheduled deliveries.</li>
                                    <li class="flex items-start gap-2"><i class="ph-bold ph-caret-right text-zapario-red mt-0.5"></i> Establish Vendor Managed Inventory (VMI) to buffer against lead time spikes.</li>
                                    <li class="flex items-start gap-2"><i class="ph-bold ph-caret-right text-zapario-red mt-0.5"></i> Identify secondary sources proactively.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Core Capabilities Grid -->
    <section id="capabilities" class="py-24 bg-gray-900 text-white border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-zapario-red font-bold uppercase tracking-widest text-sm">Services</span>
                <h2 class="text-3xl font-bold text-white mt-2">Comprehensive Supply Chain Solutions</h2>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-magnifying-glass"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">Counterfeit Mitigation</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        Rigorous screening of components sourced outside franchised channels. Visual inspection, X-ray, decapsulation, and electrical testing to AS5553 standards.
                    </p>
                </div>

                <!-- Card 2 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-list-magnifying-glass"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">BOM Scrubbing</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        Deep analysis of your Bill of Materials. We identify high-risk parts, correct MPN errors, find drop-in replacements, and assess lifecycle statuses.
                    </p>
                </div>

                <!-- Card 3 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-warehouse"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">Vendor Managed Inventory (VMI)</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        We hold dedicated inventory for your production needs, insulating you from market volatility and guaranteeing just-in-time (JIT) delivery to your CM.
                    </p>
                </div>

                <!-- Card 4 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-globe-hemisphere-east"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">Global Strategic Sourcing</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        Leveraging a worldwide network of franchised distributors, direct manufacturer relationships, and vetted independent partners to find allocated parts.
                    </p>
                </div>

                <!-- Card 5 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-circuitry"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">Redesign for Availability</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        When parts are completely obsolete, our in-house engineering team can spin a new PCB layout or adapter board to accommodate modern, available components.
                    </p>
                </div>

                <!-- Card 6 -->
                <div class="p-8 rounded-xl border border-gray-700 bg-gray-800 hover:border-zapario-red transition-all group">
                    <div class="w-12 h-12 bg-gray-700 text-zapario-red rounded-lg flex items-center justify-center text-3xl mb-6 group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-handshake"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">CM Transition Management</h3>
                    <p class="text-gray-400 text-sm leading-relaxed mb-4">
                        Moving production to a new Contract Manufacturer? We securely transfer BOMs, source components, and ensure the supply chain is intact during the move.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="flex justify-center items-center gap-2 mb-4">
                <img src="https://storage.googleapis.com/z-wp-content/zapario-1.png" alt="Zapario Logo" class="h-8 w-auto grayscale opacity-50 hover:grayscale-0 hover:opacity-100 transition-all">
            </div>
            <p class="text-gray-500 text-sm">Â© 2024 Zapario Electronics Supply Chain. Securing Production.</p>
        </div>
    </footer>

    <!-- Logic -->
    <script>
        // --- RISK ANALYZER LOGIC ---
        let riskChart;

        function initRiskGauge() {
            const ctx = document.getElementById('riskGauge').getContext('2d');
            
            riskChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Low Risk', 'Moderate', 'High Risk'],
                    datasets: [{
                        data: [33, 33, 34],
                        backgroundColor: [
                            '#10b981', // Emerald 500
                            '#f59e0b', // Amber 500
                            '#ef4444'  // Red 500
                        ],
                        borderWidth: 0,
                        circumference: 180,
                        rotation: 270,
                        cutout: '80%'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: { animateRotate: false, animateScale: false }
                },
                plugins: [{
                    id: 'gaugeNeedle',
                    afterDraw: (chart) => {
                        // Custom plugin to draw the needle based on score
                        const score = parseInt(document.getElementById('risk-score-display').innerText);
                        const needleValue = score / 100;
                        const dataTotal = 100;
                        const angle = Math.PI + (needleValue * Math.PI);
                        
                        const ctx = chart.ctx;
                        const cw = chart.canvas.offsetWidth;
                        const ch = chart.canvas.offsetHeight;
                        const cx = cw / 2;
                        const cy = ch - (ch * 0.1); // Adjust based on cutout and circumference

                        const radius = chart.innerRadius + ((chart.outerRadius - chart.innerRadius) / 2);

                        ctx.translate(cx, cy);
                        ctx.rotate(angle);
                        
                        // Draw Needle
                        ctx.beginPath();
                        ctx.moveTo(0, -5);
                        ctx.lineTo(radius * 0.9, 0);
                        ctx.lineTo(0, 5);
                        ctx.fillStyle = '#1f2937'; // Gray 800
                        ctx.fill();

                        // Draw Center dot
                        ctx.beginPath();
                        ctx.arc(0, 0, 10, 0, Math.PI * 2);
                        ctx.fill();

                        ctx.rotate(-angle);
                        ctx.translate(-cx, -cy);
                    }
                }]
            });
        }

        function updateRisk() {
            const sole = parseInt(document.getElementById('soleInput').value);
            const lead = parseInt(document.getElementById('leadInput').value);
            const eol = parseInt(document.getElementById('eolInput').value);

            // Update Labels
            document.getElementById('sole-val').innerText = sole + "%";
            document.getElementById('lead-val').innerText = lead + " Wks";
            document.getElementById('eol-val').innerText = eol + "%";

            // Calculate Score (Simple weighted algorithm for demo)
            // Normalizations: Sole (0-100), Lead (2-52 -> ~0-100), EOL (0-40 -> 0-100)
            const leadNorm = (lead / 52) * 100;
            const eolNorm = (eol / 40) * 100;

            let score = Math.floor((sole * 0.4) + (leadNorm * 0.3) + (eolNorm * 0.3));
            if (score > 100) score = 100;

            document.getElementById('risk-score-display').innerText = score;

            // Update Recommendation Text
            const textEl = document.getElementById('action-text');
            const iconEl = document.getElementById('action-icon');

            if (score < 30) {
                textEl.innerText = "Low risk detected. Your BOM is healthy. Continue standard procurement practices and maintain relationships with franchised distributors.";
                iconEl.className = "ph-fill ph-check-circle text-emerald-500 text-xl";
                document.getElementById('risk-score-display').className = "text-5xl font-bold font-mono text-emerald-600";
            } else if (score < 70) {
                textEl.innerText = "Moderate risk detected. Initiate a BOM scrub to identify pin-to-pin drop-in replacements for sole-sourced components and begin forecasting for the next 12 months.";
                iconEl.className = "ph-fill ph-warning-circle text-amber-500 text-xl";
                document.getElementById('risk-score-display').className = "text-5xl font-bold font-mono text-amber-600";
            } else {
                textEl.innerText = "CRITICAL RISK. Immediate action required. Engage Zapario's strategic sourcing team to secure allocated stock, plan Last Time Buys (LTB), or authorize a PCB redesign for obsolete parts.";
                iconEl.className = "ph-fill ph-warning-octagon text-red-600 text-xl";
                document.getElementById('risk-score-display').className = "text-5xl font-bold font-mono text-red-600";
            }

            // Force chart redraw for needle
            riskChart.update();
        }

        // --- LIFECYCLE TABS LOGIC ---
        const lifecycleData = {
            active: {
                title: "Active Phase",
                badge: "Standard Production",
                badgeColor: "bg-green-100 text-green-700",
                desc: "The component is in full production with no immediate plans for discontinuation. However, market fluctuations can still cause shortages.",
                strategies: [
                    "Negotiate long-term scheduled deliveries.",
                    "Establish Vendor Managed Inventory (VMI) to buffer against lead time spikes.",
                    "Identify secondary sources proactively."
                ]
            },
            nrnd: {
                title: "Not Recommended for New Design",
                badge: "Approaching EOL",
                badgeColor: "bg-yellow-100 text-yellow-700",
                desc: "The manufacturer is phasing out the part. It is still available, but lead times may increase and prices may rise.",
                strategies: [
                    "Halt integration into new PCB designs.",
                    "Initiate rigorous cross-referencing for drop-in replacements.",
                    "Forecast remaining production run volumes to plan transition."
                ]
            },
            eol: {
                title: "End of Life (EOL)",
                badge: "Action Required",
                badgeColor: "bg-orange-100 text-orange-700",
                desc: "A Product Discontinuation Notice (PDN) has been issued. There is a finite window to place final orders.",
                strategies: [
                    "Calculate and execute a Last Time Buy (LTB) order.",
                    "Secure bridge inventory to sustain production during redesign.",
                    "Engage engineering to update the schematic/PCB layout."
                ]
            },
            obsolete: {
                title: "Obsolete Phase",
                badge: "Production Stopped",
                badgeColor: "bg-red-100 text-red-700",
                desc: "The manufacturer no longer produces the part. Only available through independent brokers or aftermarket sources.",
                strategies: [
                    "Source through vetted independent networks with rigorous counterfeit mitigation (testing/x-ray).",
                    "Harvest components from excess inventory networks.",
                    "Redesign the PCBA for modern, available silicon."
                ]
            }
        };

        function setLifecyclePhase(phase) {
            // UI Reset
            document.querySelectorAll('.lifecycle-tab').forEach(el => {
                el.classList.remove('active', 'text-gray-600');
                if(el.id !== `tab-${phase}`) el.classList.add('text-gray-600');
            });
            document.getElementById(`tab-${phase}`).classList.add('active');
            document.getElementById(`tab-${phase}`).classList.remove('text-gray-600');

            // Content Update
            const data = lifecycleData[phase];
            const contentEl = document.getElementById('lifecycle-content');
            
            contentEl.style.opacity = 0;
            
            setTimeout(() => {
                contentEl.innerHTML = `
                    <div class="grid md:grid-cols-3 gap-8 w-full">
                        <div class="md:col-span-1">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">${data.title}</h3>
                            <span class="inline-block px-2 py-1 ${data.badgeColor} text-xs font-bold rounded uppercase">${data.badge}</span>
                        </div>
                        <div class="md:col-span-2 space-y-4">
                            <p class="text-gray-600">${data.desc}</p>
                            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                                <h4 class="font-bold text-zapario-red mb-1 text-sm uppercase">Zapario Strategy</h4>
                                <ul class="text-sm text-gray-700 space-y-2">
                                    ${data.strategies.map(s => `<li class="flex items-start gap-2"><i class="ph-bold ph-caret-right text-zapario-red mt-0.5"></i> ${s}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
                contentEl.style.opacity = 1;
            }, 200);
        }

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            initRiskGauge();
            
            // Attach slider listeners
            ['soleInput', 'leadInput', 'eolInput'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateRisk);
            });
            
            // Initial call to set values
            updateRisk();
        });

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>