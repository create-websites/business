<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firmware & Embedded Software Engineering | Zapario</title>
    <meta name="description" content="Expert firmware development services. From ultra-low power bare-metal C to complex RTOS and Embedded Linux solutions for connected IoT devices.">
    <meta name="keywords" content="Firmware Development, Embedded Software, RTOS, Bare-Metal, Embedded C, OTA Updates, Low Power IoT, Microcontroller Programming, IoT Device Management">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        zapario: {
                            red: '#D71920',
                            dark: '#991116',
                            light: '#fef2f2',
                            gray: '#f3f4f6'
                        }
                    },
                    backgroundImage: {
                        'dot-grid': "radial-gradient(#e5e7eb 2px, transparent 2px)"
                    }
                }
            }
        }
    </script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- 
    Placeholder Comments Required by Prompt:
    
    <!-- Chosen Palette: "Zapario Clean Engineering" - White and light gray backgrounds for a clinical, precise aesthetic. Dark slate for high readability. Zapario Red (#D71920) is used to draw attention to interactive elements, code logic, and active states. -->
    
    <!-- Application Structure Plan:
         1. Hero Section: "The Soul of the Machine". Abstract visual of code compiling into a chip.
         2. Embedded Spectrum (Interactive): A toggle module explaining the 3 tiers of firmware (Bare-Metal, RTOS, Linux) based on MCU/MPU constraints.
         3. Power Optimization Lab (Chart.js): A simulator showing battery drain over time. Proves the value of interrupt-driven architecture over naive polling.
         4. OTA Update Visualizer: Step-by-step CSS/JS animation of a dual-bank flash update, emphasizing reliability.
         5. Capabilities Grid: Drivers, Protocols, Security.
    -->
    
    <!-- Visualization & Content Choices:
         1. Battery Life Simulator (Line Chart):
            - Goal: Demonstrate ROI of good firmware engineering (longer battery = less maintenance).
            - Viz: Two lines on a Chart.js graph (Capacity % vs Time).
            - Interaction: Toggle switch changes the simulated firmware architecture, instantly updating the chart curve and the calculated "Estimated Life".
         2. OTA Architecture Flow (DOM Animation):
            - Goal: Explain a complex, critical IoT concept simply.
            - Viz: Split memory banks showing active vs inactive partitions.
            - Interaction: "Run OTA" button steps through download, verify, flash, swap, and reboot.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used (relying on Phosphor Icons and CSS styling). NO Mermaid JS used. -->
    -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #1f2937;
        }
        
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 350px;
            max-height: 400px;
        }

        .shadow-soft {
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.08);
        }

        /* Toggle Button Styles */
        .os-tab {
            transition: all 0.3s ease;
        }
        .os-tab.active {
            background-color: #D71920;
            color: white;
            border-color: #D71920;
            box-shadow: 0 4px 14px rgba(215, 25, 32, 0.3);
        }
        .os-tab:not(.active):hover {
            background-color: #fef2f2;
            border-color: #fca5a5;
            color: #D71920;
        }

        /* Abstract Code Animation */
        .code-line {
            width: 0;
            overflow: hidden;
            white-space: nowrap;
            animation: typeCode 2s steps(40, end) forwards;
        }
        @keyframes typeCode {
            to { width: 100%; }
        }

        /* OTA Memory Bank Styles */
        .mem-bank {
            transition: all 0.5s ease;
        }
        .mem-bank.active-bank {
            border-color: #10b981; /* Green */
            background-color: #ecfdf5;
        }
        .mem-bank.inactive-bank {
            border-color: #e5e7eb;
            background-color: #f9fafb;
            opacity: 0.7;
        }
        .mem-bank.writing {
            border-color: #3b82f6; /* Blue */
            background-color: #eff6ff;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(59, 130, 246, 0.1) 10px, rgba(59, 130, 246, 0.1) 20px);
            animation: moveStripes 1s linear infinite;
        }
        @keyframes moveStripes {
            0% { background-position: 0 0; }
            100% { background-position: 28px 0; }
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col overflow-x-hidden">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center">
                    <img src="https://storage.googleapis.com/z-wp-content/zapario-1.png" alt="Zapario Logo" class="h-10 w-auto">
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('spectrum')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">The OS Spectrum</button>
                    <button onclick="scrollToSection('power-lab')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">Power Optimization</button>
                    <button onclick="scrollToSection('ota')" class="text-sm font-semibold text-gray-600 hover:text-zapario-red transition-colors">Fail-Safe OTA</button>
                </div>
                <button class="bg-zapario-red hover:bg-zapario-dark text-white px-5 py-2.5 rounded-md text-sm font-bold transition-all shadow-md">
                    Discuss Your Project
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative pt-32 pb-20 px-4 sm:px-6 lg:px-8 overflow-hidden bg-white">
        <!-- Abstract grid background -->
        <div class="absolute inset-0 bg-dot-grid bg-[size:20px_20px] opacity-[0.3]"></div>
        
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 items-center relative z-10">
            <div>
                <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-mono font-medium bg-red-50 text-zapario-red border border-red-100 mb-6">
                    <i class="ph-bold ph-terminal-window mr-2"></i>
                    Embedded Software Engineering
                </div>
                <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight">
                    The Soul of the <br>
                    <span class="text-zapario-red">Machine.</span>
                </h1>
                <p class="text-xl text-gray-500 mb-8 font-light leading-relaxed">
                    We write the code that brings custom hardware to life. From ultra-low power bare-metal C for constrained sensors, to complex RTOS and Embedded Linux architectures for edge gateways.
                </p>
                <div class="flex flex-wrap gap-4">
                    <button onclick="scrollToSection('spectrum')" class="bg-gray-900 text-white px-8 py-3.5 rounded-md font-bold hover:bg-gray-800 transition-all shadow-lg flex items-center gap-2">
                        Explore Architectures <i class="ph-bold ph-arrow-down"></i>
                    </button>
                </div>
                
                <div class="mt-10 grid grid-cols-3 gap-6 border-t border-gray-100 pt-6">
                    <div>
                        <div class="font-bold text-2xl text-gray-900"><i class="ph-fill ph-code-block text-zapario-red"></i></div>
                        <div class="text-xs text-gray-500 uppercase font-semibold mt-2">C / C++ / Rust</div>
                    </div>
                    <div>
                        <div class="font-bold text-2xl text-gray-900"><i class="ph-fill ph-clock text-zapario-red"></i></div>
                        <div class="text-xs text-gray-500 uppercase font-semibold mt-2">Real-Time</div>
                    </div>
                    <div>
                        <div class="font-bold text-2xl text-gray-900"><i class="ph-fill ph-shield-check text-zapario-red"></i></div>
                        <div class="text-xs text-gray-500 uppercase font-semibold mt-2">Secure Boot</div>
                    </div>
                </div>
            </div>
            
            <!-- Hero Visual: Abstract Code to Hardware -->
            <div class="relative h-[400px] w-full bg-gray-900 rounded-2xl shadow-2xl border-4 border-gray-800 overflow-hidden flex flex-col p-6">
                <!-- Terminal Header -->
                <div class="flex items-center gap-2 mb-6 border-b border-gray-700 pb-4">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    <span class="ml-2 font-mono text-xs text-gray-400">main.c -> firmware.bin</span>
                </div>
                
                <!-- Animated Code -->
                <div class="flex-1 font-mono text-sm leading-loose overflow-hidden">
                    <div class="text-purple-400">void <span class="text-blue-400">system_init</span>(void) {</div>
                    <div class="text-gray-300 ml-4 code-line" style="animation-delay: 0.2s;">hal_rcc_init(); <span class="text-gray-500">// Initialize Clocks</span></div>
                    <div class="text-gray-300 ml-4 code-line" style="animation-delay: 0.8s;">hal_gpio_init(); <span class="text-gray-500">// Configure Pins</span></div>
                    <div class="text-gray-300 ml-4 code-line" style="animation-delay: 1.4s;">rtos_kernel_start(); <span class="text-gray-500">// Boot Scheduler</span></div>
                    <div class="text-purple-400">}</div>
                    
                    <div class="mt-4 text-purple-400 code-line" style="animation-delay: 2.2s;">void <span class="text-blue-400">sensor_isr</span>(void) {</div>
                    <div class="text-gray-300 ml-4 code-line" style="animation-delay: 2.8s;"><span class="text-zapario-red font-bold">process_data_fast();</span></div>
                    <div class="text-gray-300 ml-4 code-line" style="animation-delay: 3.4s;">clear_interrupt_flag();</div>
                    <div class="text-purple-400 code-line" style="animation-delay: 4.0s;">}</div>
                </div>

                <!-- Abstract Microchip at bottom -->
                <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-32 h-16 bg-gray-800 border-t-2 border-x-2 border-gray-600 rounded-t-xl flex items-center justify-center">
                    <i class="ph-duotone ph-microchip text-4xl text-zapario-red animate-pulse"></i>
                    <div class="absolute -top-10 flex flex-col items-center">
                        <div class="w-0.5 h-6 bg-zapario-red"></div>
                        <i class="ph-bold ph-caret-down text-zapario-red -mt-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- The OS Spectrum (Interactive) -->
    <section id="spectrum" class="py-24 bg-gray-50 border-y border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="text-zapario-red font-bold uppercase tracking-widest text-sm">Architectural Choice</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">The Embedded Firmware Spectrum</h2>
                <div class="h-1 w-20 bg-zapario-red mx-auto my-4"></div>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Firmware isn't one-size-fits-all. We architect the software based on your specific hardware constraints, power budget, and processing requirements.
                </p>
            </div>

            <!-- Toggle Buttons -->
            <div class="flex flex-col md:flex-row justify-center gap-4 mb-12 max-w-3xl mx-auto">
                <button onclick="setOsTab('bare')" id="tab-bare" class="os-tab active flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-center bg-white">
                    <i class="ph-bold ph-lightning text-xl mb-1 block"></i> Bare-Metal (No OS)
                </button>
                <button onclick="setOsTab('rtos')" id="tab-rtos" class="os-tab flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-gray-600 bg-white">
                    <i class="ph-bold ph-clock text-xl mb-1 block"></i> RTOS
                </button>
                <button onclick="setOsTab('linux')" id="tab-linux" class="os-tab flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-gray-600 bg-white">
                    <i class="ph-bold ph-terminal-window text-xl mb-1 block"></i> Embedded Linux
                </button>
            </div>

            <!-- Content Area -->
            <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-soft border border-gray-200 p-8 md:p-12 min-h-[350px] flex items-center transition-all duration-300" id="os-content">
                <!-- Injected via JS -->
            </div>
        </div>
    </section>

    <!-- Power Optimization Lab (Chart.js Simulator) -->
    <section id="power-lab" class="py-24 bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-12 gap-16 items-center">
                
                <!-- Controls -->
                <div class="lg:col-span-5 space-y-8">
                    <div>
                        <span class="text-zapario-red font-bold uppercase tracking-widest text-sm">Interactive Lab</span>
                        <h2 class="text-3xl font-bold text-white mt-2">Power Optimization</h2>
                        <p class="text-gray-400 mt-4 leading-relaxed">
                            Poorly written firmware drains batteries in days. By utilizing hardware interrupts, DMA (Direct Memory Access), and deep sleep states, we extend battery life from days to years.
                        </p>
                    </div>

                    <div class="bg-gray-800 p-6 rounded-xl border border-gray-700">
                        <h4 class="text-sm font-bold text-white mb-4">Select Firmware Architecture:</h4>
                        
                        <div class="space-y-3">
                            <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-gray-600 hover:bg-gray-700 transition-colors" id="label-polling">
                                <input type="radio" name="powerMode" value="polling" onchange="updatePowerSim()" class="w-4 h-4 accent-zapario-red">
                                <div>
                                    <div class="font-bold text-gray-300 text-sm">Naive Polling (Constant CPU Wake)</div>
                                    <div class="text-xs text-gray-500">Continuously checks sensors. High drain.</div>
                                </div>
                            </label>

                            <label class="flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-zapario-red bg-zapario-red/10 transition-colors" id="label-interrupt">
                                <input type="radio" name="powerMode" value="interrupt" onchange="updatePowerSim()" checked class="w-4 h-4 accent-zapario-red">
                                <div>
                                    <div class="font-bold text-zapario-red text-sm">Interrupt-Driven (Zapario Standard)</div>
                                    <div class="text-xs text-gray-400">CPU sleeps in µA range. Wakes only on events.</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-800 p-4 rounded-lg border-l-4 border-zapario-red">
                            <div class="text-xs text-gray-500 uppercase tracking-widest mb-1">Est. Battery Life</div>
                            <div id="est-life" class="text-2xl font-bold text-white font-mono">2.4 Years</div>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg border-l-4 border-gray-500">
                            <div class="text-xs text-gray-500 uppercase tracking-widest mb-1">Avg Current</div>
                            <div id="avg-current" class="text-2xl font-bold text-white font-mono">15 µA</div>
                        </div>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="lg:col-span-7">
                    <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700 shadow-2xl relative">
                        <h3 class="text-center text-sm font-bold text-gray-400 uppercase tracking-widest mb-4">Battery Discharge Curve (2000mAh Coin Cell)</h3>
                        <div class="chart-container">
                            <canvas id="powerChart"></canvas>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- OTA Visualizer -->
    <section id="ota" class="py-24 bg-white border-y border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-zapario-red font-bold uppercase tracking-widest text-sm">Resilient Infrastructure</span>
                <h2 class="text-3xl font-bold text-gray-900 mt-2">Fail-Safe OTA Updates</h2>
                <div class="h-1 w-20 bg-zapario-red mx-auto my-4"></div>
                <p class="text-gray-600 max-w-2xl mx-auto">
                    Updating firmware over Wi-Fi or Cellular is risky. A power loss during an update can "brick" a device. We implement Dual-Bank (A/B) memory architectures to guarantee safe rollbacks.
                </p>
            </div>

            <div class="grid lg:grid-cols-12 gap-12 items-center bg-gray-50 rounded-2xl border border-gray-200 shadow-inner p-8 md:p-12">
                
                <!-- Animation Pane -->
                <div class="lg:col-span-7 flex flex-col items-center">
                    
                    <!-- The MCU Memory Map -->
                    <div class="w-full max-w-sm bg-white border-2 border-gray-300 rounded-xl p-4 shadow-sm flex flex-col gap-2 relative">
                        <div class="absolute -left-12 top-1/2 -translate-y-1/2 text-xs font-bold text-gray-400 -rotate-90 tracking-widest">FLASH MEMORY</div>
                        
                        <!-- Bootloader -->
                        <div class="w-full h-10 bg-gray-800 rounded flex items-center justify-center text-white text-xs font-mono font-bold">
                            MCU BOOTLOADER (Immutable)
                        </div>

                        <!-- Bank A -->
                        <div id="bank-a" class="mem-bank active-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden">
                            <span class="text-sm font-bold text-gray-800 z-10">Partition A (Active)</span>
                            <span class="text-xs font-mono text-gray-500 z-10" id="ver-a">Firmware v1.0</span>
                        </div>

                        <!-- Bank B -->
                        <div id="bank-b" class="mem-bank inactive-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden">
                            <span class="text-sm font-bold text-gray-500 z-10">Partition B (Inactive)</span>
                            <span class="text-xs font-mono text-gray-400 z-10" id="ver-b">Empty</span>
                        </div>
                        
                        <!-- Shared Data -->
                        <div class="w-full h-10 bg-gray-200 border border-gray-300 rounded flex items-center justify-center text-gray-500 text-xs font-mono">
                            NVRAM (Config Data)
                        </div>
                    </div>

                </div>

                <!-- Controls & Steps -->
                <div class="lg:col-span-5 flex flex-col justify-center">
                    <div class="mb-8">
                        <div class="text-xs font-mono text-zapario-red mb-2 font-bold" id="ota-status">SYSTEM IDLE</div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-3" id="ota-title">Standard Operation</h3>
                        <p class="text-gray-600 text-sm leading-relaxed" id="ota-desc">
                            The device is running normally from Partition A. Partition B sits empty, waiting for the next update.
                        </p>
                    </div>
                    
                    <button onclick="runOtaSim()" id="btn-ota" class="w-full bg-zapario-red hover:bg-zapario-dark text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md">
                        <i class="ph-bold ph-cloud-arrow-down"></i> Trigger v2.0 OTA Update
                    </button>
                </div>

            </div>
        </div>
    </section>

    <!-- Capabilities Grid -->
    <section class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-gray-900">Firmware Engineering Capabilities</h2>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Item 1 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-plugs"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Custom Device Drivers</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Developing low-level drivers for proprietary sensors and actuators over I2C, SPI, UART, and custom bit-banged protocols.</p>
                </div>
                
                <!-- Item 2 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-wifi-high"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Wireless Connectivity Stack</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Integrating Bluetooth Low Energy (BLE), Wi-Fi (ESP-IDF), LoRaWAN, and Cellular (LTE-M/NB-IoT) modems via AT commands or native stacks.</p>
                </div>

                <!-- Item 3 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-shield-check"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Embedded Security</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Implementing Hardware Root of Trust, Secure Boot, encrypted flash storage, and mTLS for secure cloud telemetry.</p>
                </div>

                <!-- Item 4 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-clock-counter-clockwise"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">RTOS Integration</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Architecting multi-threaded applications using FreeRTOS or Zephyr. Managing mutexes, semaphores, and message queues to ensure determinism.</p>
                </div>

                <!-- Item 5 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-memory"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Memory Optimization</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Squeezing complex logic into highly constrained environments (e.g., &lt;32KB RAM) using memory pooling and eliminating dynamic allocation.</p>
                </div>

                <!-- Item 6 -->
                <div class="p-6 border border-gray-100 rounded-xl bg-gray-50 hover:bg-white hover:border-red-200 hover:shadow-lg transition-all group">
                    <div class="w-12 h-12 bg-white text-zapario-red rounded-lg flex items-center justify-center text-2xl mb-4 shadow-sm group-hover:bg-zapario-red group-hover:text-white transition-colors">
                        <i class="ph-duotone ph-terminal-window"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 mb-2">Linux Kernel & Yocto</h3>
                    <p class="text-sm text-gray-500 leading-relaxed">Building custom, stripped-down Linux distributions using Yocto Project for powerful edge computing gateways (NXP i.MX, Raspberry Pi Compute).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-50 border-t border-gray-200 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="flex justify-center items-center gap-2 mb-4">
                <img src="https://storage.googleapis.com/z-wp-content/zapario-1.png" alt="Zapario Logo" class="h-8 w-auto grayscale opacity-50 hover:grayscale-0 hover:opacity-100 transition-all">
            </div>
            <p class="text-gray-500 text-sm">© 2024 Zapario Firmware & Embedded Engineering.</p>
        </div>
    </footer>

    <!-- Logic -->
    <script>
        // --- OS SPECTRUM LOGIC ---
        const osData = {
            bare: {
                title: "Bare-Metal (No OS)",
                icon: "ph-lightning",
                desc: "Code executes directly on the silicon. An infinite loop (`while(1)`) handles tasks, with hardware interrupts preempting execution. Perfect for ultra-cheap, highly constrained devices.",
                pros: ["Zero overhead (Fastest boot time)", "Absolute deterministic timing", "Minimal RAM/Flash required (< 4KB)"],
                hardware: "8/16/32-bit MCUs (ATTiny, PIC, STM32G0)"
            },
            rtos: {
                title: "Real-Time Operating System (RTOS)",
                icon: "ph-clock",
                desc: "A lightweight scheduler (like FreeRTOS) manages multiple tasks/threads. It provides determinism—guaranteeing critical tasks execute within a strict timeframe—while simplifying complex multi-sensor applications.",
                pros: ["Simplifies complex logic (Multi-threading)", "Hardware abstraction layer provided", "Predictable task scheduling"],
                hardware: "32-bit MCUs (STM32F4, ESP32, Nordic nRF52)"
            },
            linux: {
                title: "Embedded Linux",
                icon: "ph-terminal-window",
                desc: "A full operating system built via Yocto or Buildroot. It offers immense power, networking capabilities, and file systems, but sacrifices strict real-time determinism and requires significant memory.",
                pros: ["Full POSIX compliance & vast libraries", "Advanced networking & UI capabilities", "High-level languages (Python, Node.js)"],
                hardware: "Microprocessors/SoCs (NXP i.MX8, Broadcom BCM)"
            }
        };

        function setOsTab(type) {
            // UI Toggle
            document.getElementById('tab-bare').className = "os-tab flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-gray-600 bg-white";
            document.getElementById('tab-rtos').className = "os-tab flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-gray-600 bg-white";
            document.getElementById('tab-linux').className = "os-tab flex-1 py-4 px-6 rounded-xl border border-gray-200 font-bold text-gray-600 bg-white";
            
            const activeBtn = document.getElementById(`tab-${type}`);
            activeBtn.className = "os-tab active flex-1 py-4 px-6 rounded-xl border font-bold text-center";

            // Content Update
            const data = osData[type];
            const content = document.getElementById('os-content');
            
            content.style.opacity = 0;
            setTimeout(() => {
                content.innerHTML = `
                    <div class="grid md:grid-cols-2 gap-12 items-center w-full">
                        <div>
                            <div class="w-16 h-16 rounded-2xl bg-red-50 text-zapario-red flex items-center justify-center text-4xl mb-6 shadow-sm border border-red-100">
                                <i class="ph-duotone ${data.icon}"></i>
                            </div>
                            <h3 class="text-3xl font-bold text-gray-900 mb-4">${data.title}</h3>
                            <p class="text-lg text-gray-600 leading-relaxed">${data.desc}</p>
                        </div>
                        <div class="space-y-6">
                            <div class="bg-gray-50 border border-gray-100 rounded-xl p-6">
                                <h4 class="text-sm font-bold text-gray-900 uppercase tracking-widest mb-4">Key Advantages</h4>
                                <ul class="space-y-3">
                                    ${data.pros.map(p => `
                                        <li class="flex items-start gap-3">
                                            <i class="ph-bold ph-check text-zapario-red mt-0.5 text-lg"></i>
                                            <span class="text-gray-700 font-medium text-sm">${p}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-xl p-4 shadow-sm flex items-center gap-4">
                                <i class="ph-duotone ph-cpu text-3xl text-gray-400"></i>
                                <div>
                                    <div class="text-xs font-bold text-gray-400 uppercase tracking-widest">Typical Hardware</div>
                                    <div class="font-bold text-gray-900">${data.hardware}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                content.style.opacity = 1;
            }, 200);
        }

        // --- POWER LAB CHART LOGIC ---
        let powerChart;

        function initPowerChart() {
            const ctx = document.getElementById('powerChart').getContext('2d');
            
            // X-axis: 0 to 36 Months
            const labels = Array.from({length: 37}, (_, i) => i);
            
            // Data generation
            // Polling: Drops fast, dead around month 4
            const pollingData = labels.map(m => {
                let val = 100 - (m * 28);
                return val > 0 ? val : null;
            });

            // Interrupts: Drops slowly, lasts ~2.4 years (29 months)
            const interruptData = labels.map(m => {
                let val = 100 - (m * 3.4);
                return val > 0 ? val : null;
            });

            powerChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Naive Polling',
                            data: pollingData,
                            borderColor: '#6b7280', // Gray
                            borderDash: [5, 5],
                            borderWidth: 2,
                            fill: false,
                            tension: 0.1,
                            pointRadius: 0
                        },
                        {
                            label: 'Interrupt-Driven',
                            data: interruptData,
                            borderColor: '#D71920', // Zapario Red
                            backgroundColor: 'rgba(215, 25, 32, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.1,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) { return "Capacity: " + context.raw.toFixed(1) + "%"; }
                            }
                        }
                    },
                    scales: {
                        y: {
                            title: { display: true, text: 'Battery Capacity (%)', color: '#9ca3af' },
                            grid: { color: '#374151' },
                            ticks: { color: '#9ca3af' },
                            min: 0, max: 100
                        },
                        x: {
                            title: { display: true, text: 'Time in Field (Months)', color: '#9ca3af' },
                            grid: { display: false },
                            ticks: { color: '#9ca3af', maxTicksLimit: 12 }
                        }
                    }
                }
            });
        }

        function updatePowerSim() {
            const mode = document.querySelector('input[name="powerMode"]:checked').value;
            
            const lblPoll = document.getElementById('label-polling');
            const lblInt = document.getElementById('label-interrupt');
            
            // Visual reset
            lblPoll.className = "flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-gray-600 hover:bg-gray-700 transition-colors";
            lblInt.className = "flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-gray-600 hover:bg-gray-700 transition-colors";
            
            lblPoll.querySelector('.font-bold').className = "font-bold text-gray-300 text-sm";
            lblInt.querySelector('.font-bold').className = "font-bold text-gray-300 text-sm";

            // Set active
            if(mode === 'polling') {
                lblPoll.className = "flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-gray-400 bg-gray-700 transition-colors";
                lblPoll.querySelector('.font-bold').className = "font-bold text-white text-sm";
                document.getElementById('est-life').innerText = "3.5 Months";
                document.getElementById('avg-current').innerText = "800 µA";
                // Emphasize polling line
                powerChart.data.datasets[0].borderWidth = 4;
                powerChart.data.datasets[0].borderColor = '#f59e0b'; // Amber
                powerChart.data.datasets[1].borderWidth = 1;
                powerChart.data.datasets[1].borderColor = '#4b5563';
                powerChart.data.datasets[1].backgroundColor = 'transparent';
            } else {
                lblInt.className = "flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-zapario-red bg-zapario-red/10 transition-colors";
                lblInt.querySelector('.font-bold').className = "font-bold text-zapario-red text-sm";
                document.getElementById('est-life').innerText = "2.4 Years";
                document.getElementById('avg-current').innerText = "15 µA";
                // Emphasize interrupt line
                powerChart.data.datasets[0].borderWidth = 2;
                powerChart.data.datasets[0].borderColor = '#6b7280';
                powerChart.data.datasets[1].borderWidth = 3;
                powerChart.data.datasets[1].borderColor = '#D71920';
                powerChart.data.datasets[1].backgroundColor = 'rgba(215, 25, 32, 0.1)';
            }
            powerChart.update();
        }

        // --- OTA SIMULATOR LOGIC ---
        let otaIsRunning = false;

        function runOtaSim() {
            if(otaIsRunning) return;
            otaIsRunning = true;

            const btn = document.getElementById('btn-ota');
            const status = document.getElementById('ota-status');
            const title = document.getElementById('ota-title');
            const desc = document.getElementById('ota-desc');
            const bankA = document.getElementById('bank-a');
            const bankB = document.getElementById('bank-b');
            const verB = document.getElementById('ver-b');

            // Reset UI for run
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // Phase 1: Download
            status.innerText = "UPDATING...";
            status.className = "text-xs font-mono text-blue-600 mb-2 font-bold animate-pulse";
            title.innerText = "Downloading Background Update";
            desc.innerText = "Firmware v2.0 is downloading via Wi-Fi directly into the inactive Partition B. The device continues to operate normally from Partition A without interruption.";
            
            bankB.className = "mem-bank writing w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
            verB.innerText = "Downloading v2.0... 45%";

            setTimeout(() => {
                verB.innerText = "Firmware v2.0 (Unverified)";
                
                // Phase 2: Verification
                title.innerText = "Cryptographic Verification";
                desc.innerText = "Download complete. The bootloader calculates the SHA-256 hash of Partition B and verifies it against Zapario's public key to ensure the payload hasn't been tampered with.";
                bankB.className = "mem-bank inactive-bank border-blue-400 w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
                
                setTimeout(() => {
                    // Phase 3: Swap & Reboot
                    status.innerText = "REBOOTING";
                    status.className = "text-xs font-mono text-yellow-600 mb-2 font-bold";
                    title.innerText = "Reboot & Bank Swap";
                    desc.innerText = "Verification passed. The bootloader updates a pointer in NVRAM to make Partition B the active boot partition, then restarts the MCU.";
                    
                    bankA.className = "mem-bank inactive-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
                    bankA.querySelector('.text-sm').innerText = "Partition A (Inactive)";
                    bankA.querySelector('.text-sm').className = "text-sm font-bold text-gray-500 z-10";
                    
                    bankB.className = "mem-bank active-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
                    bankB.querySelector('.text-sm').innerText = "Partition B (Active)";
                    bankB.querySelector('.text-sm').className = "text-sm font-bold text-gray-800 z-10";

                    setTimeout(() => {
                        // Phase 4: Success
                        status.innerText = "SUCCESS";
                        status.className = "text-xs font-mono text-green-600 mb-2 font-bold";
                        title.innerText = "v2.0 Running Successfully";
                        desc.innerText = "The device is now running the new firmware. If the boot failed, the hardware watchdog would automatically reboot and revert the pointer back to Partition A (Fail-Safe Rollback).";
                        
                        // Reset button to allow re-run (toggling back to A)
                        btn.innerHTML = '<i class="ph-bold ph-arrow-counter-clockwise"></i> Reset Simulator';
                        btn.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-zapario-red', 'hover:bg-zapario-dark', 'text-white');
                        btn.classList.add('bg-white', 'border', 'border-gray-300', 'text-gray-700', 'hover:bg-gray-50');
                        btn.onclick = resetOtaSim;
                        btn.disabled = false;
                        
                    }, 2000);

                }, 2000);

            }, 2500);
        }

        function resetOtaSim() {
            // Hard reset to initial state
            const btn = document.getElementById('btn-ota');
            const status = document.getElementById('ota-status');
            const title = document.getElementById('ota-title');
            const desc = document.getElementById('ota-desc');
            const bankA = document.getElementById('bank-a');
            const bankB = document.getElementById('bank-b');
            const verB = document.getElementById('ver-b');

            status.innerText = "SYSTEM IDLE";
            status.className = "text-xs font-mono text-zapario-red mb-2 font-bold";
            title.innerText = "Standard Operation";
            desc.innerText = "The device is running normally from Partition A. Partition B sits empty, waiting for the next update.";
            
            bankA.className = "mem-bank active-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
            bankA.querySelector('.text-sm').innerText = "Partition A (Active)";
            bankA.querySelector('.text-sm').className = "text-sm font-bold text-gray-800 z-10";
            
            bankB.className = "mem-bank inactive-bank w-full h-24 rounded flex flex-col items-center justify-center border-2 relative overflow-hidden";
            bankB.querySelector('.text-sm').innerText = "Partition B (Inactive)";
            bankB.querySelector('.text-sm').className = "text-sm font-bold text-gray-500 z-10";
            verB.innerText = "Empty";

            btn.innerHTML = '<i class="ph-bold ph-cloud-arrow-down"></i> Trigger v2.0 OTA Update';
            btn.className = "w-full bg-zapario-red hover:bg-zapario-dark text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md";
            btn.onclick = runOtaSim;
            otaIsRunning = false;
        }

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            setOsTab('rtos');
            initPowerChart();
        });

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>